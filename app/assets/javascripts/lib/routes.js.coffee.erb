# Create callable routes that conveniently takes parameters.
# Example:
#   url = path.task(taskId)
#

route = (route) ->
  return ->
    path = unescape(route)
    for i in [0..arguments.length]
      path = path.replace "{{#{i+1}}}", arguments[i]
    path

<% url = Rpm::Application.routes.url_helpers %>

TM.path =
  visionGroupsSort: route "<%= url.vision_groups_sort_path %>"
  task: route "<%= url.task_path '{{1}}' %>"
  newInvite: route "<%= url.new_invite_path %>"
  root: route "<%= url.root_path %>"
  unreadCount: route "<%= url.unread_count_path %>"
  viewEmailAfterSignin: route "<%= url.view_email_after_signin_path %>"
  editGroupIcon: route "<%= url.edit_group_icon_path '{{1}}' %>"
