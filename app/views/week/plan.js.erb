$('.filters_wrap a').removeClass('active');
$('#week').addClass('active');
$('#pad').replaceWith("<%= escape_javascript render('plan')  %>");
$('.categories_wrap').replaceWith("<%= escape_javascript render('side_forecast')  %>");



$(document).ready(function() {
	
	$("li.task_wrap.outcome_ready").addClass('outcome');
	$("li.task_wrap.outcome_ready > .header").show();
	
	$("li.task_wrap.outcome").each(function(){
		var pHeight = $(this).find('.purpose').height() + 30;
		var rHeight = $(this).find('.result_text').height() + 10;
		var height = pHeight > rHeight ? pHeight : rHeight;
		height = height > 26 ? height : 26;
		$(this).find('ul.action_plan').css({ 'min-height': height });
	});

	$('.day_drop').droppable({
		accept: '.task_wrap',
		tolerance: 'pointer',
		over: function(event,ui){
			$('.dragging_task').css('opacity',0.3);
			$(this).addClass('day_drop_over');
		},
		out: function(event,ui){
			$(this).removeClass('day_drop_over');
		},
		drop: function(event,ui){
			var taskId = ui.draggable.attr('id');
			var date = $(this).attr('date');
			
			$.ajax({
				url: "/tasks/" + taskId,
				type: 'PUT',
				data: $.param({task : { start: date, end: date+' 01:00:00', scheduled: 'true', week: 'false' }, open: 'true' }),
				success: function(){
					$('.day_drop_over').removeClass('day_drop_over');
				}
			});
		}
	});

});